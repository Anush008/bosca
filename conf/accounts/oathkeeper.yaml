serve:
  proxy:
    port: 4455
  api:
    port: 4456

access_rules:
  repositories:
    - file://../conf/accounts/access-rules.yaml

mutators:
  header:
    enabled: true
    config:
      headers:
        X-User: "{{ print .Subject }}"
  noop:
    enabled: true
  id_token:
    enabled: true
    config:
      issuer_url: https://auth.bosca.io/
      jwks_url: https://auth.bosca.io/.well-known/jwks.json

authorizers:
  allow:
    enabled: true
  deny:
    enabled: true

authenticators:
  noop:
    enabled: true
  bearer_token:
    enabled: true
    config:
      check_session_url: https://accounts.bosca.io/sessions/whoami
      preserve_path: true
      subject_from: "identity.id"
      token_from:
        header: Authorization
  anonymous:
    enabled: true
    config:
      subject: anonymous
  oauth2_client_credentials:
    enabled: true
    config:
      token_url: https://bosca.io/oauth2/token